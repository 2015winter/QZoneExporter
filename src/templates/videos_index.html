<!DOCTYPE html>
<html lang="zh">

<head>
	<link rel="icon" href="../Common/images/favicon.ico"> 
	<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<title>QQ空间备份-视频</title>
	<link rel="stylesheet" href="../Common/vendor/css/font-awesome.min.css">
	<link rel="stylesheet" href="../Common/vendor/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="../Common/css/common.css">
	<script src="../Common/vendor/js/jquery.min.js"></script>
	<script src="../Common/vendor/js/bootstrap.bundle.min.js"></script>
	
	<script type="text/javascript" src="../Common/json/config.js"></script>
	<script type="text/javascript" src="json/videos.js"></script>
	
	<style>
		body {
			background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 50%, #feca57 100%);
			min-height: 100vh;
			padding-top: 70px;
			padding-bottom: 80px;
		}
		
		.navbar-videos {
			background: linear-gradient(135deg, rgba(255, 107, 107, 0.95), rgba(238, 90, 36, 0.95)) !important;
			backdrop-filter: blur(10px);
		}
		
		.main-card {
			background: rgba(255, 255, 255, 0.95);
			backdrop-filter: blur(20px);
			border-radius: 24px;
			box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
			padding: 40px;
			margin-top: 20px;
		}
		
		.page-header {
			text-align: center;
			margin-bottom: 40px;
			padding-bottom: 30px;
			border-bottom: 1px solid rgba(0, 0, 0, 0.08);
		}
		
		.page-header-icon {
			font-size: 48px;
			background: linear-gradient(135deg, #ff6b6b, #ee5a24);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			margin-bottom: 16px;
		}
		
		.page-header-title {
			font-size: 32px;
			font-weight: 700;
			background: linear-gradient(135deg, #ff6b6b, #ee5a24);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
		}
		
		/* 年份导航网格 */
		.year-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
			gap: 16px;
			margin-bottom: 32px;
		}
		
		.year-card {
			background: linear-gradient(145deg, #fff, #f8fafc);
			border-radius: 16px;
			padding: 20px;
			text-decoration: none;
			transition: all 0.3s ease;
			border: 2px solid transparent;
			position: relative;
			overflow: hidden;
			display: block;
		}
		
		.year-card::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			height: 4px;
			background: linear-gradient(90deg, #ff6b6b, #ee5a24);
			transform: scaleX(0);
			transform-origin: left;
			transition: transform 0.3s ease;
		}
		
		.year-card:hover {
			transform: translateY(-4px);
			box-shadow: 0 12px 32px rgba(255, 107, 107, 0.25);
			border-color: rgba(255, 107, 107, 0.3);
			text-decoration: none;
		}
		
		.year-card:hover::before {
			transform: scaleX(1);
		}
		
		.year-card-inner {
			display: flex;
			align-items: baseline;
			gap: 4px;
			margin-bottom: 8px;
		}
		
		.year-number {
			font-size: 32px;
			font-weight: 700;
			background: linear-gradient(135deg, #ff6b6b, #ee5a24);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
		}
		
		.year-label {
			font-size: 16px;
			color: #718096;
		}
		
		.year-stats {
			display: flex;
			align-items: baseline;
			gap: 4px;
			margin-bottom: 12px;
		}
		
		.year-count {
			font-size: 20px;
			font-weight: 600;
			color: #2d3748;
		}
		
		.year-unit {
			font-size: 13px;
			color: #a0aec0;
		}
		
		.year-progress {
			height: 4px;
			background: rgba(255, 107, 107, 0.15);
			border-radius: 2px;
			overflow: hidden;
		}
		
		.year-progress-bar {
			height: 100%;
			background: linear-gradient(90deg, #ff6b6b, #ee5a24);
			border-radius: 2px;
		}
		
		/* 那年今日区块 */
		.that-year-today {
			background: linear-gradient(135deg, rgba(255, 107, 107, 0.08), rgba(238, 90, 36, 0.08));
			border-radius: 16px;
			padding: 24px;
			margin-bottom: 32px;
		}
		
		.that-year-today-title {
			display: flex;
			align-items: center;
			gap: 10px;
			font-size: 18px;
			font-weight: 600;
			color: #2d3748;
			margin-bottom: 16px;
		}
		
		.that-year-today-title i {
			color: #ff6b6b;
		}
		
		.that-year-items {
			display: flex;
			flex-wrap: wrap;
			gap: 12px;
		}
		
		.that-year-item {
			display: flex;
			align-items: center;
			gap: 8px;
			background: #fff;
			padding: 8px 14px;
			border-radius: 20px;
			text-decoration: none;
			color: #4a5568;
			font-size: 14px;
			transition: all 0.2s ease;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
		}
		
		.that-year-item:hover {
			background: linear-gradient(135deg, #ff6b6b, #ee5a24);
			color: #fff;
			text-decoration: none;
			transform: translateY(-2px);
			box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);
		}
		
		.that-year-empty {
			color: #a0aec0;
			font-size: 14px;
			padding: 8px 0;
		}
		
		/* 统计信息行 */
		.stats-row {
			display: flex;
			justify-content: center;
			gap: 32px;
			flex-wrap: wrap;
			padding-top: 24px;
			border-top: 1px solid rgba(0, 0, 0, 0.08);
		}
		
		.stat-item {
			display: flex;
			align-items: center;
			gap: 12px;
		}
		
		.stat-icon {
			width: 44px;
			height: 44px;
			display: flex;
			align-items: center;
			justify-content: center;
			background: linear-gradient(135deg, rgba(255, 107, 107, 0.1), rgba(238, 90, 36, 0.1));
			border-radius: 12px;
			color: #ff6b6b;
			font-size: 18px;
		}
		
		.stat-info {
			display: flex;
			flex-direction: column;
		}
		
		.stat-value {
			font-size: 20px;
			font-weight: 700;
			color: #2d3748;
		}
		
		.stat-label {
			font-size: 13px;
			color: #a0aec0;
		}
		
		.footer-videos {
			background: linear-gradient(135deg, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.9));
		}
		
		/* 响应式样式 */
		@media (max-width: 768px) {
			.main-card {
				padding: 24px 16px;
				margin: 16px 8px;
				border-radius: 16px;
			}
			
			.page-header {
				margin-bottom: 24px;
				padding-bottom: 20px;
			}
			
			.page-header-icon {
				font-size: 36px;
			}
			
			.page-header-title {
				font-size: 24px;
			}
			
			.year-grid {
				grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
				gap: 12px;
			}
			
			.year-card {
				padding: 16px;
			}
			
			.year-number {
				font-size: 26px;
			}
			
			.stats-row {
				gap: 20px;
			}
			
			.stat-icon {
				width: 38px;
				height: 38px;
				font-size: 16px;
			}
			
			.stat-value {
				font-size: 18px;
			}
			
			.that-year-today {
				padding: 16px;
			}
		}
	</style>
</head>

<body>
	<header>
		<nav class="navbar navbar-expand-lg navbar-dark fixed-top navbar-videos">
			<a class="navbar-brand" href="../index.html">
				<i class="fa fa-cloud-download mr-2"></i>QQ空间导出助手
			</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<nav aria-label="breadcrumb">
					<ol class="breadcrumb" style="background: transparent;">
						<li class="breadcrumb-item"><a href="../index.html" style="color: rgba(255,255,255,0.85);"><i class="fa fa-home mr-1"></i>个人中心</a></li>
						<li class="breadcrumb-item active" style="color: rgba(255,255,255,0.9);"><i class="fa fa-play-circle mr-1"></i>视频</li>
					</ol>
				</nav>
			</div>
		</nav>
	</header>
	
	<main role="main" class="flex-shrink-0">
		<div class="container">
			<div class="main-card">
				<div class="page-header">
					<i class="fa fa-play-circle page-header-icon"></i>
					<h1 class="page-header-title">视频时光机</h1>
					<p style="color: #718096;">共 <span id="totalCount"><%:=total%></span> 个视频，记录了 <span id="yearCount"><%:=yearList.length%></span> 年的精彩时刻</p>
				</div>
				
				<!-- 那年今日 -->
				<div class="that-year-today" id="thatYearToday">
					<div class="that-year-today-title">
						<i class="fa fa-clock-o"></i>
						<span>那年今日</span>
					</div>
					<div class="that-year-items" id="thatYearItems">
						<!-- 动态渲染 -->
					</div>
				</div>
				
				<!-- 年份导航网格 -->
				<div id="yearGrid" class="year-grid">
					<%for (const yearInfo of yearList) {%>
					<a href="<%:=yearInfo.year%>.html" class="year-card">
						<div class="year-card-inner">
							<span class="year-number"><%:=yearInfo.year%></span>
							<span class="year-label">年</span>
						</div>
						<div class="year-stats">
							<span class="year-count"><%:=yearInfo.count%></span>
							<span class="year-unit">个视频</span>
						</div>
						<div class="year-progress">
							<div class="year-progress-bar" style="width: <%:=(yearInfo.count / maxCount) * 100%>%"></div>
						</div>
					</a>
					<%}%>
				</div>
				
				<!-- 统计信息 -->
				<div class="stats-row">
					<div class="stat-item">
						<i class="fa fa-calendar stat-icon"></i>
						<div class="stat-info">
							<span class="stat-value"><%:=yearList.length > 0 ? yearList[yearList.length - 1].year : '-'%></span>
							<span class="stat-label">最早年份</span>
						</div>
					</div>
					<div class="stat-item">
						<i class="fa fa-clock-o stat-icon"></i>
						<div class="stat-info">
							<span class="stat-value"><%:=yearList.length > 0 ? yearList[0].year : '-'%></span>
							<span class="stat-label">最近年份</span>
						</div>
					</div>
					<div class="stat-item">
						<i class="fa fa-film stat-icon"></i>
						<div class="stat-info">
							<span class="stat-value"><%:=maxYear || '-'%></span>
							<span class="stat-label">上传最多</span>
						</div>
					</div>
					<div class="stat-item">
						<i class="fa fa-heart stat-icon"></i>
						<div class="stat-info">
							<span class="stat-value"><%:=totalLikes%></span>
							<span class="stat-label">总获赞数</span>
						</div>
					</div>
				</div>
			</div>
		</div>
	</main>
	
	<footer class="footer mt-auto py-3 fixed-bottom footer-videos">
		<div class="container text-center">
			<span class="text-white">
				<i class="fa fa-leaf mr-2"></i>落叶随风，青春，稀纵即逝
			</span>
		</div>
	</footer>
	
	<script>
		// 渲染"那年今日"
		function renderThatYearToday() {
			const today = new Date();
			const currentMonth = today.getMonth() + 1;
			const currentDay = today.getDate();
			
			// 筛选历史上的今天上传的视频
			const thatYearVideos = videos.filter(video => {
				if (!video.uploadTime) return false;
				const uploadDate = new Date(video.uploadTime * 1000);
				return uploadDate.getMonth() + 1 === currentMonth && uploadDate.getDate() === currentDay;
			});
			
			const container = document.getElementById('thatYearItems');
			
			if (thatYearVideos.length === 0) {
				container.innerHTML = '<span class="that-year-empty">今天没有历史视频记录</span>';
				return;
			}
			
			// 按年份分组
			const yearGroups = {};
			thatYearVideos.forEach(video => {
				const year = new Date(video.uploadTime * 1000).getFullYear();
				if (!yearGroups[year]) yearGroups[year] = [];
				yearGroups[year].push(video);
			});
			
			// 渲染
			const html = Object.keys(yearGroups)
				.sort((a, b) => b - a)
				.map(year => `<a href="${year}.html" class="that-year-item"><i class="fa fa-play-circle"></i>${year}年 ${yearGroups[year].length}个视频</a>`)
				.join('');
			
			container.innerHTML = html;
		}
		
		document.addEventListener('DOMContentLoaded', renderThatYearToday);
	</script>
</body>

</html>
