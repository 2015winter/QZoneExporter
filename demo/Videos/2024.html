<!DOCTYPE html>
<html lang="zh">

<head>
	<link rel="icon" href="../Common/images/favicon.ico"> 
	<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<title>QQ空间备份-视频 2024 Demo</title>
	<link rel="stylesheet" href="../Common/vendor/css/font-awesome.min.css">
	<link rel="stylesheet" href="../Common/vendor/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="../Common/css/common.css">
	<script src="../Common/vendor/js/jquery.min.js"></script>
	<script src="../Common/vendor/js/bootstrap.bundle.min.js"></script>
	<script src="../Common/vendor/js/lodash.min.js"></script>
	
	<script type="text/javascript" src="../Common/json/config.js"></script>
	<script type="text/javascript" src="json/videos.js"></script>
	
	<style>
		body {
			background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 50%, #feca57 100%);
			min-height: 100vh;
			padding-top: 70px;
			padding-bottom: 80px;
		}
		
		.navbar-videos {
			background: linear-gradient(135deg, rgba(255, 107, 107, 0.95), rgba(238, 90, 36, 0.95)) !important;
			backdrop-filter: blur(10px);
		}
		
		.main-card {
			background: rgba(255, 255, 255, 0.95);
			backdrop-filter: blur(20px);
			border-radius: 24px;
			box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
			padding: 40px;
			margin-top: 20px;
		}
		
		.page-header {
			text-align: center;
			margin-bottom: 40px;
			padding-bottom: 30px;
			border-bottom: 1px solid rgba(0, 0, 0, 0.08);
		}
		
		.page-header-icon {
			font-size: 48px;
			background: linear-gradient(135deg, #ff6b6b, #ee5a24);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			margin-bottom: 16px;
		}
		
		.page-header-title {
			font-size: 32px;
			font-weight: 700;
			background: linear-gradient(135deg, #ff6b6b, #ee5a24);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
		}
		
		/* 视频网格 */
		.videos-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
			gap: 24px;
		}
		
		.video-card {
			background: #fff;
			border-radius: 16px;
			overflow: hidden;
			box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
			cursor: pointer;
			transition: all 0.3s ease;
		}
		
		.video-card:hover {
			transform: translateY(-8px);
			box-shadow: 0 12px 30px rgba(255, 107, 107, 0.25);
		}
		
		.video-cover {
			position: relative;
			height: 180px;
			overflow: hidden;
			background: #000;
		}
		
		.video-cover img {
			width: 100%;
			height: 100%;
			object-fit: cover;
			transition: transform 0.3s ease;
		}
		
		.video-card:hover .video-cover img {
			transform: scale(1.1);
		}
		
		.video-play-btn {
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			width: 60px;
			height: 60px;
			background: linear-gradient(135deg, rgba(255, 107, 107, 0.9), rgba(238, 90, 36, 0.9));
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			color: #fff;
			font-size: 24px;
			box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
			transition: all 0.3s ease;
		}
		
		.video-card:hover .video-play-btn {
			transform: translate(-50%, -50%) scale(1.1);
		}
		
		.video-info {
			padding: 20px;
		}
		
		.video-name {
			font-size: 16px;
			font-weight: 600;
			color: #333;
			margin-bottom: 8px;
			display: -webkit-box;
			-webkit-line-clamp: 1;
			-webkit-box-orient: vertical;
			overflow: hidden;
		}
		
		.video-desc {
			font-size: 14px;
			color: #666;
			line-height: 1.5;
			display: -webkit-box;
			-webkit-line-clamp: 2;
			-webkit-box-orient: vertical;
			overflow: hidden;
		}
		
		.video-stats {
			margin-top: 12px;
			font-size: 13px;
			color: #999;
			display: flex;
			gap: 15px;
		}
		
		.video-stats span i {
			margin-right: 4px;
		}
		
		.video-date {
			margin-top: 8px;
			font-size: 12px;
			color: #a0aec0;
		}
		
		/* Demo 标记 */
		.demo-badge {
			position: fixed;
			top: 80px;
			right: 20px;
			background: linear-gradient(135deg, #667eea, #764ba2);
			color: #fff;
			padding: 8px 16px;
			border-radius: 20px;
			font-weight: 600;
			font-size: 14px;
			box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
			z-index: 1000;
		}
		
		.footer-videos {
			background: linear-gradient(135deg, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.9));
		}
		
		/* 视频播放弹窗 */
		.video-modal {
			display: none;
			position: fixed;
			inset: 0;
			background: rgba(0, 0, 0, 0.95);
			z-index: 2000;
			justify-content: center;
			align-items: center;
		}
		
		.video-modal.show {
			display: flex;
		}
		
		.video-modal-content {
			position: relative;
			background: linear-gradient(145deg, #1e1e1e, #2d2d2d);
			border-radius: 20px;
			overflow: hidden;
			max-width: 90vw;
			max-height: 90vh;
			box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
		}
		
		.video-modal-header {
			background: linear-gradient(135deg, #ff6b6b, #ee5a24);
			padding: 15px 20px;
			display: flex;
			justify-content: space-between;
			align-items: center;
		}
		
		.video-modal-title {
			color: #fff;
			font-size: 16px;
			font-weight: 600;
		}
		
		.video-modal-close {
			background: rgba(255, 255, 255, 0.2);
			border: none;
			color: #fff;
			width: 36px;
			height: 36px;
			border-radius: 50%;
			cursor: pointer;
		}
		
		.video-modal-body {
			padding: 20px;
			display: flex;
			justify-content: center;
		}
		
		.video-modal-body video {
			max-width: 100%;
			max-height: 70vh;
			border-radius: 8px;
		}
		
		.video-modal-footer {
			padding: 15px 20px;
			background: rgba(0, 0, 0, 0.3);
			color: #ccc;
			font-size: 14px;
		}
		
		.video-nav-btn {
			position: absolute;
			top: 50%;
			transform: translateY(-50%);
			width: 44px;
			height: 44px;
			background: linear-gradient(135deg, #ff6b6b, #ee5a24);
			border: none;
			border-radius: 50%;
			color: #fff;
			font-size: 16px;
			cursor: pointer;
			z-index: 10;
		}
		
		.video-nav-btn:hover {
			transform: translateY(-50%) scale(1.1);
		}
		
		.video-nav-btn.prev {
			left: 15px;
		}
		
		.video-nav-btn.next {
			right: 15px;
		}
		
		/* 月份分组标题 */
		.month-section {
			grid-column: 1 / -1;
		}
		
		.month-title {
			display: flex;
			align-items: center;
			gap: 12px;
			margin-bottom: 20px;
			padding-bottom: 16px;
			border-bottom: 2px solid rgba(255, 107, 107, 0.2);
		}
		
		.month-title h3 {
			font-size: 24px;
			font-weight: 700;
			color: #2d3748;
			margin: 0;
		}
		
		.month-title .badge {
			background: linear-gradient(135deg, #ff6b6b, #ee5a24);
			color: #fff;
			padding: 4px 12px;
			border-radius: 20px;
			font-size: 14px;
		}
	</style>
</head>

<body>
	<!-- Demo 标记 -->
	<div class="demo-badge">
		<i class="fa fa-star mr-1"></i>Demo 演示
	</div>
	
	<header>
		<nav class="navbar navbar-expand-lg navbar-dark fixed-top navbar-videos">
			<a class="navbar-brand" href="../index.html">
				<i class="fa fa-cloud-download mr-2"></i>QQ空间导出助手
			</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<nav aria-label="breadcrumb">
					<ol class="breadcrumb" style="background: transparent;">
						<li class="breadcrumb-item"><a href="../index.html" style="color: rgba(255,255,255,0.85);"><i class="fa fa-home mr-1"></i>个人中心</a></li>
						<li class="breadcrumb-item"><a href="index.html" style="color: rgba(255,255,255,0.85);"><i class="fa fa-play-circle mr-1"></i>视频</a></li>
						<li class="breadcrumb-item active" style="color: rgba(255,255,255,0.9);">2024年</li>
					</ol>
				</nav>
			</div>
		</nav>
	</header>
	
	<main role="main" class="flex-shrink-0">
		<div class="container">
			<div class="main-card">
				<div class="page-header">
					<i class="fa fa-play-circle page-header-icon"></i>
					<h1 class="page-header-title">2024年视频</h1>
					<p style="color: #718096;">共 <span id="totalCount">0</span> 个视频</p>
				</div>
				
				<div class="videos-grid" id="videosList">
					<!-- 由JS动态生成 -->
				</div>
			</div>
		</div>
	</main>
	
	<!-- 视频播放弹窗 -->
	<div class="video-modal" id="videoModal">
		<button class="video-nav-btn prev" onclick="navigateVideo(-1)">
			<i class="fa fa-chevron-left"></i>
		</button>
		<div class="video-modal-content">
			<div class="video-modal-header">
				<span class="video-modal-title" id="videoModalTitle">视频标题</span>
				<button class="video-modal-close" onclick="closeVideoModal()">
					<i class="fa fa-times"></i>
				</button>
			</div>
			<div class="video-modal-body">
				<video id="modalVideo" controls>
					<source src="" type="video/mp4">
					您的浏览器不支持视频播放
				</video>
			</div>
			<div class="video-modal-footer">
				<div id="videoModalDesc"></div>
				<div class="mt-2" id="videoModalStats"></div>
			</div>
		</div>
		<button class="video-nav-btn next" onclick="navigateVideo(1)">
			<i class="fa fa-chevron-right"></i>
		</button>
	</div>
	
	<footer class="footer mt-auto py-3 fixed-bottom footer-videos">
		<div class="container text-center">
			<span class="text-white">
				<i class="fa fa-leaf mr-2"></i>落叶随风，青春，稀纵即逝
			</span>
		</div>
	</footer>
	
	<script>
		const CURRENT_YEAR = 2024;
		let currentVideoIndex = 0;
		let yearVideos = [];
		
		function formatDate(timestamp) {
			const date = new Date(timestamp * 1000);
			return date.toLocaleDateString('zh-CN');
		}
		
		function formatFullDate(timestamp) {
			const date = new Date(timestamp * 1000);
			const y = date.getFullYear();
			const m = String(date.getMonth() + 1).padStart(2, '0');
			const d = String(date.getDate()).padStart(2, '0');
			return `${y}-${m}-${d}`;
		}
		
		function renderVideos() {
			const container = document.getElementById('videosList');
			
			// 筛选当前年份的视频
			yearVideos = videos.filter(video => {
				if (video.uploadTime) {
					return new Date(video.uploadTime * 1000).getFullYear() === CURRENT_YEAR;
				}
				return false;
			});
			
			// 按月份分组
			const groupedByMonth = {};
			yearVideos.forEach((video, idx) => {
				const month = new Date(video.uploadTime * 1000).getMonth() + 1;
				if (!groupedByMonth[month]) {
					groupedByMonth[month] = [];
				}
				groupedByMonth[month].push({ video, index: idx });
			});
			
			// 按月份倒序排列
			const sortedMonths = Object.keys(groupedByMonth).sort((a, b) => b - a);
			
			let html = '';
			sortedMonths.forEach(month => {
				html += `
					<div class="month-section">
						<div class="month-title">
							<h3><i class="fa fa-calendar-o mr-2"></i>${month}月</h3>
							<span class="badge">${groupedByMonth[month].length} 个视频</span>
						</div>
					</div>
				`;
				
				groupedByMonth[month].forEach(({ video, index }) => {
					html += `
						<div class="video-card" onclick="openVideo(${index})">
							<div class="video-cover">
								<img src="${video.custom_pre_url}" alt="${video.name}" loading="lazy">
								<div class="video-play-btn">
									<i class="fa fa-play"></i>
								</div>
							</div>
							<div class="video-info">
								<h3 class="video-name">${video.name}</h3>
								<p class="video-desc">${video.desc}</p>
								<div class="video-stats">
									<span><i class="fa fa-heart text-danger"></i>${video.likeTotal || 0}</span>
									<span><i class="fa fa-comment text-info"></i>${video.commentTotal || 0}</span>
									<span><i class="fa fa-eye"></i>${video.custom_visitor?.viewCount || 0}</span>
								</div>
								<div class="video-date">
									<i class="fa fa-clock-o"></i> ${formatFullDate(video.uploadTime)}
								</div>
							</div>
						</div>
					`;
				});
			});
			
			container.innerHTML = html;
			document.getElementById('totalCount').textContent = yearVideos.length;
		}
		
		function openVideo(index) {
			currentVideoIndex = index;
			showCurrentVideo();
			document.getElementById('videoModal').classList.add('show');
			document.body.style.overflow = 'hidden';
		}
		
		function showCurrentVideo() {
			const video = yearVideos[currentVideoIndex];
			document.getElementById('videoModalTitle').textContent = video.name;
			document.getElementById('modalVideo').src = video.custom_url;
			document.getElementById('videoModalDesc').textContent = video.desc;
			document.getElementById('videoModalStats').innerHTML = `
				<i class="fa fa-heart text-danger mr-1"></i>${video.likeTotal || 0} · 
				<i class="fa fa-comment text-info mr-1"></i>${video.commentTotal || 0} · 
				<i class="fa fa-eye mr-1"></i>${video.custom_visitor?.viewCount || 0} · 
				<i class="fa fa-clock-o mr-1"></i>${formatDate(video.uploadTime)}
			`;
		}
		
		function closeVideoModal() {
			document.getElementById('videoModal').classList.remove('show');
			document.getElementById('modalVideo').pause();
			document.body.style.overflow = '';
		}
		
		function navigateVideo(direction) {
			document.getElementById('modalVideo').pause();
			currentVideoIndex += direction;
			if (currentVideoIndex < 0) currentVideoIndex = yearVideos.length - 1;
			if (currentVideoIndex >= yearVideos.length) currentVideoIndex = 0;
			showCurrentVideo();
		}
		
		// 键盘导航
		document.addEventListener('keydown', function(e) {
			if (!document.getElementById('videoModal').classList.contains('show')) return;
			if (e.key === 'Escape') closeVideoModal();
			if (e.key === 'ArrowLeft') navigateVideo(-1);
			if (e.key === 'ArrowRight') navigateVideo(1);
		});
		
		// 点击背景关闭
		document.getElementById('videoModal').addEventListener('click', function(e) {
			if (e.target === this) closeVideoModal();
		});
		
		document.addEventListener('DOMContentLoaded', renderVideos);
	</script>
</body>

</html>
