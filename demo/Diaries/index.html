<!DOCTYPE html>
<html lang="zh">

<head>
	<link rel="icon" href="../Common/images/favicon.ico"> 
	<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<title>QQ空间备份-日记 Demo</title>
	<link rel="stylesheet" href="../Common/vendor/css/font-awesome.min.css">
	<link rel="stylesheet" href="../Common/vendor/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="../Common/css/common.css">
	<script src="../Common/vendor/js/jquery.min.js"></script>
	<script src="../Common/vendor/js/bootstrap.bundle.min.js"></script>
	<script src="../Common/vendor/js/lodash.min.js"></script>
	
	<script type="text/javascript" src="../Common/json/config.js"></script>
	<script type="text/javascript" src="json/diaries.js"></script>
	
	<style>
		body {
			background: linear-gradient(135deg, #f6d365 0%, #fda085 50%, #f093fb 100%);
			min-height: 100vh;
			padding-top: 70px;
			padding-bottom: 80px;
		}
		
		.navbar-diaries {
			background: linear-gradient(135deg, rgba(246, 211, 101, 0.95), rgba(253, 160, 133, 0.95)) !important;
			backdrop-filter: blur(10px);
		}
		
		.main-card {
			background: rgba(255, 255, 255, 0.95);
			backdrop-filter: blur(20px);
			border-radius: 24px;
			box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
			padding: 40px;
			margin-top: 20px;
		}
		
		.page-header {
			text-align: center;
			margin-bottom: 40px;
			padding-bottom: 30px;
			border-bottom: 1px solid rgba(0, 0, 0, 0.08);
		}
		
		.page-header-icon {
			font-size: 48px;
			background: linear-gradient(135deg, #f6d365, #fda085);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			margin-bottom: 16px;
		}
		
		.page-header-title {
			font-size: 32px;
			font-weight: 700;
			background: linear-gradient(135deg, #f6d365, #fda085);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
		}
		
		/* 日记时间线 */
		.diary-timeline {
			position: relative;
			padding-left: 30px;
		}
		
		.diary-timeline::before {
			content: '';
			position: absolute;
			left: 10px;
			top: 0;
			bottom: 0;
			width: 2px;
			background: linear-gradient(to bottom, #f6d365, #fda085);
		}
		
		.diary-item {
			position: relative;
			margin-bottom: 30px;
			padding: 20px 25px;
			background: #fff;
			border-radius: 16px;
			box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
			cursor: pointer;
			transition: all 0.3s ease;
		}
		
		.diary-item::before {
			content: '';
			position: absolute;
			left: -25px;
			top: 25px;
			width: 12px;
			height: 12px;
			background: linear-gradient(135deg, #f6d365, #fda085);
			border-radius: 50%;
			border: 3px solid #fff;
			box-shadow: 0 2px 8px rgba(246, 211, 101, 0.4);
		}
		
		.diary-item:hover {
			transform: translateX(10px);
			box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
		}
		
		.diary-date {
			font-size: 14px;
			color: #fda085;
			font-weight: 600;
			margin-bottom: 8px;
		}
		
		.diary-title {
			font-size: 18px;
			font-weight: 600;
			color: #333;
			margin-bottom: 10px;
		}
		
		.diary-preview {
			font-size: 14px;
			color: #666;
			line-height: 1.6;
			display: -webkit-box;
			-webkit-line-clamp: 3;
			-webkit-box-orient: vertical;
			overflow: hidden;
		}
		
		.diary-stats {
			margin-top: 10px;
			font-size: 13px;
			color: #999;
		}
		
		/* Demo 标记 */
		.demo-badge {
			position: fixed;
			top: 80px;
			right: 20px;
			background: linear-gradient(135deg, #ff6b6b, #ee5a24);
			color: #fff;
			padding: 8px 16px;
			border-radius: 20px;
			font-weight: 600;
			font-size: 14px;
			box-shadow: 0 4px 15px rgba(238, 90, 36, 0.4);
			z-index: 1000;
		}
		
		.footer-diaries {
			background: linear-gradient(135deg, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.9));
		}
	</style>
</head>

<body>
	<!-- Demo 标记 -->
	<div class="demo-badge">
		<i class="fa fa-star mr-1"></i>Demo 演示
	</div>
	
	<header>
		<nav class="navbar navbar-expand-lg navbar-dark fixed-top navbar-diaries">
			<a class="navbar-brand" href="../index.html">
				<i class="fa fa-cloud-download mr-2"></i>QQ空间导出助手
			</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<nav aria-label="breadcrumb">
					<ol class="breadcrumb" style="background: transparent;">
						<li class="breadcrumb-item"><a href="../index.html" style="color: rgba(255,255,255,0.85);"><i class="fa fa-home mr-1"></i>个人中心</a></li>
						<li class="breadcrumb-item active" style="color: rgba(255,255,255,0.9);"><i class="fa fa-calendar mr-1"></i>日记</li>
					</ol>
				</nav>
			</div>
		</nav>
	</header>
	
	<main role="main" class="flex-shrink-0">
		<div class="container">
			<div class="main-card">
				<div class="page-header">
					<i class="fa fa-calendar page-header-icon"></i>
					<h1 class="page-header-title">我的日记</h1>
					<p style="color: #718096;">共 <span id="totalCount">0</span> 篇日记</p>
				</div>
				
				<div class="diary-timeline" id="diaryList">
					<!-- 由JS动态生成 -->
				</div>
			</div>
		</div>
	</main>
	
	<!-- 日记详情弹窗 -->
	<div class="modal fade" id="diaryModal" tabindex="-1">
		<div class="modal-dialog modal-lg modal-dialog-scrollable">
			<div class="modal-content" style="border-radius: 20px; overflow: hidden;">
				<div class="modal-header" style="background: linear-gradient(135deg, #f6d365, #fda085); color: #fff;">
					<h5 class="modal-title" id="diaryModalTitle">日记标题</h5>
					<button type="button" class="close text-white" data-dismiss="modal">
						<span>&times;</span>
					</button>
				</div>
				<div class="modal-body" id="diaryModalBody" style="padding: 30px; white-space: pre-wrap; line-height: 1.8;">
					<!-- 日记内容 -->
				</div>
				<div class="modal-footer">
					<span class="text-muted mr-auto" id="diaryModalMeta"></span>
					<button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
				</div>
			</div>
		</div>
	</div>
	
	<footer class="footer mt-auto py-3 fixed-bottom footer-diaries">
		<div class="container text-center">
			<span class="text-white">
				<i class="fa fa-leaf mr-2"></i>落叶随风，青春，稀纵即逝
			</span>
		</div>
	</footer>
	
	<script>
		function renderDiaries() {
			const container = document.getElementById('diaryList');
			let html = '';
			
			diaries.forEach(diary => {
				html += `
					<div class="diary-item" onclick="showDiary('${diary.diaryid}')">
						<div class="diary-date"><i class="fa fa-calendar-o mr-1"></i>${diary.pubTime}</div>
						<h3 class="diary-title">${diary.title}</h3>
						<div class="diary-preview">${diary.content.substring(0, 150)}...</div>
						<div class="diary-stats">
							<i class="fa fa-eye mr-1"></i>${diary.custom_visitor?.viewCount || 0} 次浏览
						</div>
					</div>
				`;
			});
			
			container.innerHTML = html;
			document.getElementById('totalCount').textContent = diaries.length;
		}
		
		function showDiary(diaryid) {
			const diary = diaries.find(d => d.diaryid === diaryid);
			if (!diary) return;
			
			document.getElementById('diaryModalTitle').textContent = diary.title;
			document.getElementById('diaryModalBody').textContent = diary.content;
			document.getElementById('diaryModalMeta').innerHTML = `<i class="fa fa-calendar-o mr-1"></i>${diary.pubTime} · <i class="fa fa-eye mr-1"></i>${diary.custom_visitor?.viewCount || 0}`;
			
			$('#diaryModal').modal('show');
		}
		
		document.addEventListener('DOMContentLoaded', renderDiaries);
	</script>
</body>

</html>
